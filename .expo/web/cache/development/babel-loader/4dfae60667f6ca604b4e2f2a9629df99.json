{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/aichibaseball/training-management-app/src/screens/HomeScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport firebase from \"firebase\";\nimport { LineChart } from \"react-native-chart-kit\";\nimport { Calendar, CalendarList, Agenda } from 'react-native-calendars';\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFDF6\",\n    width: \"100%\"\n  },\n  upperContainer: {\n    flexDirection: \"row\",\n    height: 100,\n    justifyContent: \"space-around\",\n    alignItems: \"center\"\n  },\n  upperContainerTitle: {\n    fontSize: 30\n  },\n  upperContainerText: {\n    fontSize: 24,\n    alignSelf: \"flex-end\"\n  },\n  lineChart: {\n    alignItems: \"center\",\n    marginTop: 10\n  },\n  button: {\n    backgroundColor: \"green\",\n    height: 48,\n    borderRadius: 14,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"80%\",\n    alignSelf: \"center\",\n    marginTop: 10\n  },\n  buttonTitle: {\n    fontSize: 20,\n    color: \"#fff\"\n  }\n});\nvar chartConfig = {\n  backgroundColor: '#fff',\n  backgroundGradientFrom: '#fff',\n  backgroundGradientTo: '#fff',\n  color: function color() {\n    var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.5;\n    return \"rgba(0, 0, 0,0.5)\";\n  }\n};\n\nvar decimalPoint = function decimalPoint(y) {\n  return parseFloat(y).toFixed(1);\n};\n\nvar toInteger = function toInteger(y) {\n  return parseFloat(y).toFixed();\n};\n\ndateToString = function dateToString(date) {\n  var str = date.toDate().toISOString();\n  return str.split(\"T\")[0];\n};\n\nvar byDate = function byDate(a, b) {\n  return a.date.seconds - b.date.seconds;\n};\n\nvar getWeight = function getWeight() {\n  var _firebase$auth = firebase.auth(),\n      currentUser = _firebase$auth.currentUser;\n\n  var db = firebase.firestore();\n  db.collection(\"users/\" + currentUser.uid + \"/weight\").where(\"weight\", \"==\", \"59\").get().then(function (querySnapshot) {\n    querySnapshot.forEach(function (doc) {\n      console.log(doc.data(), \"doc\");\n      console.log(dateToString(doc.data().date));\n    });\n  }).catch(function (error) {\n    console.log(error, \"error\");\n  });\n};\n\ngetWeight();\n\nvar HomeScreen = function HomeScreen(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      weightData = _useState2[0],\n      setWeightData = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      weightLabels = _useState4[0],\n      setWeightLabels = _useState4[1];\n\n  var _useState5 = useState([1]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      weightList = _useState6[0],\n      setWeightList = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      foodData = _useState8[0],\n      setFoodData = _useState8[1];\n\n  var _useState9 = useState([1]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      kcalList = _useState10[0],\n      setKcalList = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentKcal = _useState12[0],\n      setCurrentKcal = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      kcalLabels = _useState14[0],\n      setKcalLabels = _useState14[1];\n\n  useEffect(function () {\n    var _firebase$auth2 = firebase.auth(),\n        currentUser = _firebase$auth2.currentUser;\n\n    var db = firebase.firestore();\n    db.collection(\"users/\" + currentUser.uid + \"/weight\").onSnapshot(function (querySnapshot) {\n      var weightData = [];\n      querySnapshot.forEach(function (doc) {\n        weightData.push(_objectSpread({}, doc.data(), {\n          key: doc.id\n        }));\n      });\n      setWeightData(weightData);\n      var weightLabels = [];\n      var sortedWeightData = [].concat(weightData).sort(byDate);\n      sortedWeightData.forEach(function (item) {\n        weightLabels.push(dateToString(item.date).slice(5));\n      });\n      setWeightLabels(weightLabels);\n      var weightList = [];\n      sortedWeightData.forEach(function (item) {\n        weightList.push(parseFloat(item.weight).toFixed(1));\n      });\n      setWeightList(weightList);\n    });\n    db.collection(\"users/\" + currentUser.uid + \"/food\").onSnapshot(function (querySnapshot) {\n      var foodData = [];\n      querySnapshot.forEach(function (doc) {\n        foodData.push(_objectSpread({}, doc.data(), {\n          key: doc.id\n        }));\n      });\n      setFoodData(foodData);\n      var kcalList = [];\n      var sortedKcalData = [].concat(foodData).sort(byDate);\n\n      for (var i = 0; i < sortedKcalData.length; i++) {\n        if (i === 0) {\n          kcalList.push(parseFloat(sortedKcalData[i].kcal));\n        } else {\n          if (dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i - 1].date)) {\n            kcalList[kcalList.length - 1] += parseFloat(sortedKcalData[i].kcal);\n          } else {\n            kcalList.push(parseFloat(sortedKcalData[i].kcal));\n          }\n        }\n      }\n\n      setKcalList(kcalList);\n      setCurrentKcal(kcalList[kcalList.length - 1]);\n      var kcalLabels = [];\n\n      for (var _i = 0; _i < sortedKcalData.length; _i++) {\n        if (_i === 0) {\n          kcalLabels.push(dateToString(sortedKcalData[_i].date).slice(5));\n        } else {\n          if (dateToString(sortedKcalData[_i].date) === dateToString(sortedKcalData[_i - 1].date)) {} else {\n            kcalLabels.push(dateToString(sortedKcalData[_i].date).slice(5));\n          }\n        }\n      }\n\n      setKcalLabels(kcalLabels);\n    });\n    return function () {\n      return console.log('Clean Up ');\n    };\n  }, []);\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.upperContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.upperContainerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, \"\\u6442\\u53D6\\u30AB\\u30ED\\u30EA\\u30FC\"), React.createElement(Text, {\n    style: styles.upperContainerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, currentKcal + \"kcal\")), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.upperContainerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, \"\\u76EE\\u6A19\\u4F53\\u91CD\\u307E\\u3067\"), React.createElement(Text, {\n    style: styles.upperContainerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }, \"5kg\"))), React.createElement(Calendar, {\n    onDayPress: function onDayPress(day) {\n      console.log(day.dateString, \"day\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"TrainingMenu\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u30C8\\u30EC\\u30FC\\u30CB\\u30F3\\u30B0\")), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"FoodManagement\", {\n        foodData: foodData\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u98DF\\u4E8B\")), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"WeightManagement\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u4F53\\u91CD\")));\n};\n\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/aichibaseball/training-management-app/src/screens/HomeScreen.js"],"names":["React","useState","useEffect","firebase","LineChart","Calendar","CalendarList","Agenda","styles","StyleSheet","create","container","flex","backgroundColor","width","upperContainer","flexDirection","height","justifyContent","alignItems","upperContainerTitle","fontSize","upperContainerText","alignSelf","lineChart","marginTop","button","borderRadius","buttonTitle","color","chartConfig","backgroundGradientFrom","backgroundGradientTo","opacity","decimalPoint","y","parseFloat","toFixed","toInteger","dateToString","date","str","toDate","toISOString","split","byDate","a","b","seconds","getWeight","auth","currentUser","db","firestore","collection","uid","where","get","then","querySnapshot","forEach","doc","console","log","data","catch","error","HomeScreen","props","weightData","setWeightData","weightLabels","setWeightLabels","weightList","setWeightList","foodData","setFoodData","kcalList","setKcalList","currentKcal","setCurrentKcal","kcalLabels","setKcalLabels","onSnapshot","push","key","id","sortedWeightData","sort","item","slice","weight","sortedKcalData","i","length","kcal","day","dateString","navigation","navigate"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect}from 'react';\nimport { StyleSheet, View, Text,TouchableHighlight } from 'react-native';\nimport firebase from \"firebase\"\nimport {LineChart} from \"react-native-chart-kit\"\nimport {Calendar,CalendarList,Agenda} from 'react-native-calendars'\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFDF6\",\n    width: \"100%\"\n  },\n  upperContainer :{\n    flexDirection: \"row\",\n    height: 100,\n    justifyContent: \"space-around\",\n    alignItems: \"center\"\n  },\n  upperContainerTitle : {\n    fontSize: 30,\n  },\n  upperContainerText : {\n    fontSize: 24,\n    alignSelf: \"flex-end\"\n  },\n  lineChart: {\n    alignItems: \"center\",\n    marginTop: 10,\n  },\n  button: {\n    backgroundColor: \"green\",\n    height: 48,\n    borderRadius: 14,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"80%\",\n    alignSelf: \"center\",\n    marginTop: 10,\n  },\n  buttonTitle: {\n    fontSize:20,\n    color: \"#fff\",\n  },\n});\n\nconst chartConfig = {\n  backgroundColor: '#fff',\n  backgroundGradientFrom: '#fff',\n  backgroundGradientTo: '#fff',\n  color: (opacity = 0.5) => `rgba(0, 0, 0,0.5)`,\n}\n\n\nconst decimalPoint  = (y)=>{\nreturn parseFloat(y).toFixed(1)\n}\n\nconst toInteger = (y)=>{\n  return parseFloat(y).toFixed()\n}\n\ndateToString = (date)=>{\n  const str = date.toDate().toISOString();\n  return str.split(\"T\")[0] \n}\n\nconst byDate = ((a,b)=>(a.date.seconds - b.date.seconds))\n\nconst getWeight = (()=>{\n  const {currentUser} = firebase.auth();\n  const db =firebase.firestore()\n  db.collection(`users/${currentUser.uid}/weight`\n  ).where(\"weight\",\"==\",\"59\")\n  .get()\n  .then((querySnapshot)=>{\n    querySnapshot.forEach((doc)=>{\n      console.log(doc.data(),\"doc\")\n      console.log(dateToString(doc.data().date))\n    })\n  })\n  .catch((error)=>{\n    console.log(error,\"error\")\n  })\n})\ngetWeight()\n\n\nconst HomeScreen = (props)=> {\n  const [weightData,setWeightData] = useState([])\n  const [weightLabels,setWeightLabels] = useState([])\n  const [weightList,setWeightList] = useState([1])\n  const [foodData,setFoodData] = useState([])\n  const [kcalList,setKcalList] = useState([1])\n  const [currentKcal,setCurrentKcal] = useState([])\n  const [kcalLabels,setKcalLabels] = useState([])\n\n  \n     \n  useEffect (()=>{\n    const {currentUser} = firebase.auth();\n    const db =firebase.firestore()\n\n     db.collection(`users/${currentUser.uid}/weight`)\n     .onSnapshot((querySnapshot)=>{\n      \n       const weightData =[];\n       //firebaseから体重データを取得\n        querySnapshot.forEach((doc)=>{\n          weightData.push({...doc.data(),key: doc.id})\n         })\n        setWeightData(weightData)\n\n       //日付の取得\n       const weightLabels = [];\n       const sortedWeightData = [...weightData].sort(byDate)\n\n       sortedWeightData.forEach((item)=>{\n         weightLabels.push(dateToString(item.date).slice(5))\n       })\n       setWeightLabels(weightLabels)\n\n       //体重の値の取得\n       const weightList =[]\n       sortedWeightData.forEach((item)=>{\n         weightList.push(parseFloat(item.weight).toFixed(1))\n       })\n\n       setWeightList(weightList)\n     })\n\n     db.collection(`users/${currentUser.uid}/food`)\n     .onSnapshot((querySnapshot)=>{\n       const foodData =[];\n       //firebaseから食事データを取得\n        querySnapshot.forEach((doc)=>{\n          foodData.push({...doc.data(),key: doc.id})\n         })\n        setFoodData(foodData)\n       \n       //kcalの加工\n       const kcalList =[]\n       const sortedKcalData = [...foodData].sort(byDate)\n      \n       for(let i = 0; i < sortedKcalData.length ; i++){\n         if(i === 0){\n           kcalList.push(parseFloat(sortedKcalData[i].kcal))\n         }else{\n           if(dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i -1].date)){\n             kcalList[kcalList.length-1] += parseFloat(sortedKcalData[i].kcal)\n           }else{\n               kcalList.push(parseFloat(sortedKcalData[i].kcal))\n             }\n         }\n       }\n       setKcalList(kcalList)\n       setCurrentKcal(kcalList[kcalList.length-1]) \n\n\n      //kcalLabelの加工\n       const kcalLabels = [];\n\n       for (let i = 0; i < sortedKcalData.length; i++){\n         if(i === 0){\n           kcalLabels.push(dateToString(sortedKcalData[i].date).slice(5))\n         }else {\n           if(dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i -1].date)){\n           }else{\n               kcalLabels.push(dateToString(sortedKcalData[i].date).slice(5))\n             }\n         }\n       }\n       setKcalLabels(kcalLabels)\n     })\n     return (() => console.log('Clean Up '));\n  },[])\n     \n    \n\n     \n    return (\n      <View style={styles.container}>\n        <View  style={styles.upperContainer}>\n          <View>\n            <Text style={styles.upperContainerTitle}>摂取カロリー</Text>\n            <Text style={styles.upperContainerText}>{`${currentKcal}kcal`}</Text>\n          </View>\n\n          <View>\n            <Text style={styles.upperContainerTitle}>目標体重まで</Text>\n            <Text style={styles.upperContainerText}>5kg</Text>\n          </View>\n        </View>\n        <Calendar \n          onDayPress = {((day)=>{console.log(day.dateString,\"day\")})}\n        />\n        {/* ユーザーが初めてログインした際にエラー発生 \n                labels: [],\n              datasets: [{data:[0]},*/}\n         {/* <LineChart \n            data = {{\n               labels: weightLabels ,\n                datasets: [{data:weightList\n               },\n               ] \n            }}\n            formatYLabel={decimalPoint}\n            yAxisSuffix=\" kg\"\n            style={styles.lineChart} \n            width={400} height={200} \n            chartConfig={chartConfig}\n            withInnerLines={false}\n            withOuterLines={false}\n        />  \n         <LineChart \n            data = {{\n               labels: kcalLabels,\n               datasets: [{data:kcalList},\n            ]}}\n            formatYLabel={toInteger}\n            yAxisSuffix=\"kcal\"\n            style={styles.lineChart} \n            width={400} height={200} \n            chartConfig={chartConfig}\n            withInnerLines={false}\n            withOuterLines={false}\n            />  */}\n\n        <TouchableHighlight style={styles.button} underlayColor=\"#C70F66\"\n          onPress={()=>props.navigation.navigate(\"TrainingMenu\")}>\n          <Text style={styles.buttonTitle}>今日のトレーニング\n          </Text>\n        </TouchableHighlight> \n\n        <TouchableHighlight style={styles.button} \n                            underlayColor=\"#C70F66\"\n          onPress={()=>props.navigation.navigate(\"FoodManagement\",{foodData:foodData})}>\n          <Text style={styles.buttonTitle}>今日の食事</Text>\n        </TouchableHighlight>\n\n        <TouchableHighlight style={styles.button} underlayColor=\"#C70F66\"\n          onPress={()=>props.navigation.navigate(\"WeightManagement\")}>\n        <Text style={styles.buttonTitle} >今日の体重</Text>\n        </TouchableHighlight> \n\n      </View>\n    ); \n  \n}\n\nexport default HomeScreen"]},"metadata":{},"sourceType":"module"}