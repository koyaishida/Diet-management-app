{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/aichibaseball/training-management-app/src/screens/HomeScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport firebase from \"firebase\";\nimport { LineChart } from \"react-native-chart-kit\";\nimport CircleButton from \"../elements/CircleButton\";\nimport { FontAwesome } from '@expo/vector-icons';\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFDF6\",\n    width: \"100%\"\n  },\n  upperContainer: {\n    flexDirection: \"row\",\n    padding: 20,\n    paddingRight: 30\n  },\n  upperLeft: {\n    width: \"50%\"\n  },\n  upperContainerTitle: {\n    fontSize: 18,\n    alignSelf: \"flex-end\"\n  },\n  upperContainerText: {\n    fontSize: 22,\n    alignSelf: \"flex-end\"\n  },\n  lineChart: {\n    alignItems: \"center\"\n  },\n  button: {\n    backgroundColor: \"green\",\n    height: 48,\n    borderRadius: 14,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"80%\",\n    alignSelf: \"center\",\n    marginTop: 10\n  },\n  buttonTitle: {\n    fontSize: 20,\n    color: \"#fff\"\n  }\n});\nvar chartConfig = {\n  backgroundColor: '#fff',\n  backgroundGradientFrom: '#fff',\n  backgroundGradientTo: '#fff',\n  color: function color() {\n    var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.5;\n    return \"rgba(0, 0, 0,0.5)\";\n  }\n};\n\nvar decimalPoint = function decimalPoint(y) {\n  return parseFloat(y).toFixed(1);\n};\n\nvar toInteger = function toInteger(y) {\n  return parseFloat(y).toFixed();\n};\n\nvar dateToString = function dateToString(date) {\n  var str = date.toDate().toISOString();\n  return str.split(\"T\")[0];\n};\n\nvar older = function older(a, b) {\n  return a.date.seconds - b.date.seconds;\n};\n\nvar HomeScreen = function HomeScreen(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      weightData = _useState2[0],\n      setWeightData = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      weightLabels = _useState4[0],\n      setWeightLabels = _useState4[1];\n\n  var _useState5 = useState([0]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      weightList = _useState6[0],\n      setWeightList = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      foodData = _useState8[0],\n      setFoodData = _useState8[1];\n\n  var _useState9 = useState([0]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      kcalList = _useState10[0],\n      setKcalList = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentKcal = _useState12[0],\n      setCurrentKcal = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      kcalLabels = _useState14[0],\n      setKcalLabels = _useState14[1];\n\n  var _useState15 = useState(new Date().toISOString().split(\"T\")[0]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      currentDay = _useState16[0],\n      setCurrentDay = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      requiredKcal = _useState18[0],\n      setRequiredKcal = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      targetWeight = _useState20[0],\n      setTargetWeight = _useState20[1];\n\n  var _useState21 = useState(7),\n      _useState22 = _slicedToArray(_useState21, 2),\n      amountDisplay = _useState22[0],\n      setAmountDisplay = _useState22[1];\n\n  var displayChart = function displayChart(data) {\n    console.log(data, \"data\");\n\n    if (data.length > amountDisplay) {\n      return data.slice(data.length - amountDisplay, data.length - amountDisplay + 7);\n    } else if (data.length <= 7) {\n      return data;\n    } else if (data.length <= amountDisplay) {\n      return data.slice(data.length - data.length, data.length - data.length + 7);\n    }\n  };\n\n  var prevChart = function prevChart() {\n    if (weightLabels.length < amountDisplay || kcalLabels.length < amountDisplay) {\n      return;\n    } else {\n      setAmountDisplay(amountDisplay + 7);\n    }\n  };\n\n  var nextChart = function nextChart() {\n    if (amountDisplay == 7) {\n      return;\n    } else {\n      setAmountDisplay(amountDisplay - 7);\n    }\n  };\n\n  useEffect(function () {\n    console.log(\"render\");\n\n    var _firebase$auth = firebase.auth(),\n        currentUser = _firebase$auth.currentUser;\n\n    var db = firebase.firestore();\n    db.collection(\"users/\" + currentUser.uid + \"/weight\").onSnapshot(function (querySnapshot) {\n      var weightData = [];\n      querySnapshot.forEach(function (doc) {\n        weightData.push(_objectSpread({}, doc.data(), {\n          key: doc.id\n        }));\n      });\n      setWeightData(weightData);\n      var weightList = [];\n      var sortedWeightData = [].concat(weightData).sort(older);\n      sortedWeightData.forEach(function (item) {\n        weightList.push(parseFloat(item.weight));\n      });\n\n      if (weightList.length == 0) {\n        setWeightList([0]);\n      } else {\n        console.log(weightList, \"sss\");\n        setWeightList(displayChart(weightList));\n      }\n\n      var weightLabels = [];\n      sortedWeightData.forEach(function (a) {\n        weightLabels.push(dateToString(a.date).slice(5));\n      });\n      console.log(weightLabels, \"chart\");\n      setWeightLabels(displayChart(weightLabels));\n    });\n    db.collection(\"users/\" + currentUser.uid + \"/food\").onSnapshot(function (querySnapshot) {\n      var foodData = [];\n      querySnapshot.forEach(function (doc) {\n        foodData.push(_objectSpread({}, doc.data(), {\n          key: doc.id\n        }));\n      });\n      setFoodData(foodData);\n      var kcalList = [];\n      var sortedKcalData = [].concat(foodData).sort(older);\n\n      for (var i = 0; i < sortedKcalData.length; i++) {\n        if (i === 0) {\n          kcalList.push(parseFloat(sortedKcalData[i].kcal));\n        } else {\n          if (dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i - 1].date)) {\n            kcalList[kcalList.length - 1] += parseFloat(sortedKcalData[i].kcal);\n          } else {\n            kcalList.push(parseFloat(sortedKcalData[i].kcal));\n          }\n        }\n      }\n\n      if (kcalList.length == 0) {\n        setKcalList([0]);\n      } else {\n        setKcalList(displayChart(kcalList));\n      }\n\n      var kcalLabels = [];\n\n      for (var _i = 0; _i < sortedKcalData.length; _i++) {\n        if (_i === 0) {\n          kcalLabels.push(dateToString(sortedKcalData[_i].date).slice(5));\n        } else {\n          if (dateToString(sortedKcalData[_i].date) === dateToString(sortedKcalData[_i - 1].date)) {} else {\n            kcalLabels.push(dateToString(sortedKcalData[_i].date).slice(5));\n          }\n        }\n      }\n\n      setKcalLabels(displayChart(kcalLabels));\n\n      if (kcalLabels[kcalLabels.length - 1] !== currentDay.slice(5)) {\n        setCurrentKcal(0);\n      } else {\n        setCurrentKcal(kcalList[kcalList.length - 1]);\n      }\n    });\n    db.collection(\"users/\" + currentUser.uid + \"/personalData\").onSnapshot(function (querySnapshot) {\n      var personalData = [];\n      querySnapshot.forEach(function (doc) {\n        personalData.push(_objectSpread({}, doc.data(), {\n          key: doc.id\n        }));\n      });\n      setRequiredKcal(personalData[0].requiredKcal);\n      setTargetWeight(personalData[0].targetWeight);\n    });\n    return function () {\n      console.log('Clean Up ');\n    };\n  }, [amountDisplay]);\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.upperContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.upperLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.upperContainerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, \"\\u5FC5\\u8981\\u6442\\u53D6\\u30AB\\u30ED\\u30EA\\u30FC\\u307E\\u3067\"), React.createElement(Text, {\n    style: styles.upperContainerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  }, requiredKcal - currentKcal + \" kcal\")), React.createElement(View, {\n    style: styles.upperLeft,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.upperContainerTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, \"\\u76EE\\u6A19\\u4F53\\u91CD\\u307E\\u3067\"), React.createElement(Text, {\n    style: styles.upperContainerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }, Math.round((weightList[weightList.length - 1] - targetWeight) * 10) / 10 + \" kg\"))), React.createElement(LineChart, {\n    data: {\n      labels: weightLabels,\n      datasets: [{\n        data: weightList\n      }]\n    },\n    formatYLabel: decimalPoint,\n    yAxisSuffix: \" kg\",\n    style: styles.lineChart,\n    width: 400,\n    height: 200,\n    chartConfig: chartConfig,\n    withInnerLines: false,\n    withOuterLines: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }), React.createElement(LineChart, {\n    data: {\n      labels: kcalLabels,\n      datasets: [{\n        data: kcalList\n      }]\n    },\n    formatYLabel: toInteger,\n    yAxisSuffix: \"kcal\",\n    style: styles.lineChart,\n    width: 400,\n    height: 200,\n    chartConfig: chartConfig,\n    withInnerLines: false,\n    withOuterLines: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"space-around\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableHighlight, {\n    onPress: prevChart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 13\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"arrow-left\",\n    size: 25,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 15\n    }\n  })), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 13\n    }\n  }, \"BACK\"))), React.createElement(TouchableHighlight, {\n    onPress: nextChart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"row\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, \"NEXT\"), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, React.createElement(FontAwesome, {\n    name: \"arrow-right\",\n    size: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  }))))), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"TrainingManagement\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 9\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u30C8\\u30EC\\u30FC\\u30CB\\u30F3\\u30B0\")), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"FoodManagement\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 9\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u98DF\\u4E8B\")), React.createElement(TouchableHighlight, {\n    style: styles.button,\n    underlayColor: \"#C70F66\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"WeightManagement\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }\n  }, \"\\u4ECA\\u65E5\\u306E\\u4F53\\u91CD\")), React.createElement(CircleButton, {\n    name: \"cog\",\n    onPress: function onPress() {\n      return props.navigation.navigate(\"PersonalData\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/aichibaseball/training-management-app/src/screens/HomeScreen.js"],"names":["React","useState","useEffect","firebase","LineChart","CircleButton","FontAwesome","styles","StyleSheet","create","container","flex","backgroundColor","width","upperContainer","flexDirection","padding","paddingRight","upperLeft","upperContainerTitle","fontSize","alignSelf","upperContainerText","lineChart","alignItems","button","height","borderRadius","justifyContent","marginTop","buttonTitle","color","chartConfig","backgroundGradientFrom","backgroundGradientTo","opacity","decimalPoint","y","parseFloat","toFixed","toInteger","dateToString","date","str","toDate","toISOString","split","older","a","b","seconds","HomeScreen","props","weightData","setWeightData","weightLabels","setWeightLabels","weightList","setWeightList","foodData","setFoodData","kcalList","setKcalList","currentKcal","setCurrentKcal","kcalLabels","setKcalLabels","Date","currentDay","setCurrentDay","requiredKcal","setRequiredKcal","targetWeight","setTargetWeight","amountDisplay","setAmountDisplay","displayChart","data","console","log","length","slice","prevChart","nextChart","auth","currentUser","db","firestore","collection","uid","onSnapshot","querySnapshot","forEach","doc","push","key","id","sortedWeightData","sort","item","weight","sortedKcalData","i","kcal","personalData","Math","round","labels","datasets","navigation","navigate"],"mappings":"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","sourcesContent":["import React ,{useState,useEffect}from 'react';\nimport { StyleSheet, View, Text,TouchableHighlight } from 'react-native';\nimport firebase from \"firebase\"\nimport {LineChart} from \"react-native-chart-kit\"\nimport CircleButton from \"../elements/CircleButton\"\nimport { FontAwesome } from '@expo/vector-icons';\n\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FFFDF6\",\n    width: \"100%\",\n    // justifyContent:\"center\"\n  },\n  upperContainer :{\n    flexDirection: \"row\",\n    padding:20,\n    paddingRight:30,\n  },\n  upperLeft:{\n    width:\"50%\",\n  }\n  ,\n  upperContainerTitle : {\n    fontSize: 18,\n    alignSelf: \"flex-end\"\n  },\n  upperContainerText : {\n    fontSize: 22,\n    alignSelf: \"flex-end\"\n  },\n  lineChart: {\n    alignItems: \"center\",\n  },\n  button: {\n    backgroundColor: \"green\",\n    height: 48,\n    borderRadius: 14,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"80%\",\n    alignSelf: \"center\",\n    marginTop: 10,\n  },\n  buttonTitle: {\n    fontSize:20,\n    color: \"#fff\",\n  },\n});\n\nconst chartConfig = {\n  backgroundColor: '#fff',\n  backgroundGradientFrom: '#fff',\n  backgroundGradientTo: '#fff',\n  color: (opacity = 0.5) => `rgba(0, 0, 0,0.5)`,\n}\n\n\nconst decimalPoint  = (y)=>{\nreturn parseFloat(y).toFixed(1)\n}\n\nconst toInteger = (y)=>{\n  return parseFloat(y).toFixed()\n}\n\nconst dateToString = (date)=>{\n  const str = date.toDate().toISOString();\n  return str.split(\"T\")[0] \n}\n\nconst older = ((a,b)=>(a.date.seconds - b.date.seconds))\n\n\nconst HomeScreen = (props)=> {\n  const [weightData,setWeightData] = useState([])\n  const [weightLabels,setWeightLabels] = useState([])\n  const [weightList,setWeightList] = useState([0])\n  const [foodData,setFoodData] = useState([])\n  const [kcalList,setKcalList] = useState([0])\n  const [currentKcal,setCurrentKcal] = useState([])\n  const [kcalLabels,setKcalLabels] = useState([])\n  const [currentDay,setCurrentDay] = useState(new Date().toISOString().split(\"T\")[0],)\n  const [requiredKcal,setRequiredKcal] = useState([])\n  const [targetWeight,setTargetWeight] = useState([])\n  const [amountDisplay,setAmountDisplay] = useState(7)\n  \n\n  const displayChart =(data)=>{\n    console.log(data,\"data\")\n    if(data.length > amountDisplay){\n      \n      return data.slice(data.length-amountDisplay,data.length-amountDisplay+7)\n    }else if(data.length <= 7){\n      \n       return data \n       //.slice(data.length-amountDisplay,data.length-amountDisplay-7)\n    }else if(data.length <= amountDisplay){\n      \n      return data.slice(data.length-data.length,data.length-data.length+7)\n    }\n  }\n\n  const prevChart =()=>{\n    if(weightLabels.length < amountDisplay || kcalLabels.length < amountDisplay){\n      return\n    }else{\n      setAmountDisplay(amountDisplay+7)\n    }\n  }\n\n  const nextChart =()=>{\n    if(amountDisplay == 7){\n      return\n    }else{\n      setAmountDisplay(amountDisplay-7)\n    }\n  }\n  \n  \n     \n    useEffect (()=>{\n      console.log(\"render\")\n      const {currentUser} = firebase.auth();\n      const db =firebase.firestore()\n      \n\n      db.collection(`users/${currentUser.uid}/weight`)\n      .onSnapshot((querySnapshot)=>{\n        const weightData =[];\n        //firebaseから体重データを取得\n        querySnapshot.forEach((doc)=>{\n          weightData.push({...doc.data(),key: doc.id})\n        })\n        setWeightData(weightData)\n\n        //体重の値の取得\n        const weightList =[]\n        const sortedWeightData = [...weightData].sort(older)\n\n        sortedWeightData.forEach((item)=>{\n          weightList.push(parseFloat(item.weight))\n        })\n        //折れ線グラフエラー回避の為\n        if(weightList.length == 0){\n          setWeightList([0])\n        }else{\n          console.log(weightList,\"sss\")\n          setWeightList(displayChart(weightList))\n        }\n\n        //体重のラベルの取得\n        const weightLabels = [];\n        \n        sortedWeightData.forEach((a)=>{\n          weightLabels.push(dateToString(a.date).slice(5))\n        })\n        console.log(weightLabels,\"chart\")\n        setWeightLabels(displayChart(weightLabels))\n      })\n\n      //firebaseから食事データを取得\n      db.collection(`users/${currentUser.uid}/food`)\n      .onSnapshot((querySnapshot)=>{\n        const foodData =[];\n        querySnapshot.forEach((doc)=>{\n          foodData.push({...doc.data(),key: doc.id})\n          })\n        setFoodData(foodData)\n      \n        //kcalの加工\n        const kcalList =[]\n        const sortedKcalData = [...foodData].sort(older)\n\n        for(let i = 0; i < sortedKcalData.length ; i++){\n          if(i === 0){\n            kcalList.push(parseFloat(sortedKcalData[i].kcal))\n          }else{\n            if(dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i -1].date)){\n              kcalList[kcalList.length-1] += parseFloat(sortedKcalData[i].kcal)\n            }else{\n                kcalList.push(parseFloat(sortedKcalData[i].kcal))\n              }\n          }\n        }\n\n        if(kcalList.length == 0){\n          setKcalList([0])\n        }else{\n          setKcalList(displayChart(kcalList))\n        }  \n        \n\n\n        //kcalLabelの加工\n        const kcalLabels = [];\n        for (let i = 0; i < sortedKcalData.length; i++){\n          if(i === 0){\n            kcalLabels.push(dateToString(sortedKcalData[i].date).slice(5))\n          }else {\n            if(dateToString(sortedKcalData[i].date) === dateToString(sortedKcalData[i -1].date)){\n            }else{\n                kcalLabels.push(dateToString(sortedKcalData[i].date).slice(5))\n              }\n          }\n        }\n        setKcalLabels(displayChart(kcalLabels))\n\n        if(kcalLabels[kcalLabels.length-1] !== currentDay.slice(5)){\n          setCurrentKcal(0)\n        }else{\n          setCurrentKcal(kcalList[kcalList.length-1])\n        }\n      })\n\n    \n      db.collection(`users/${currentUser.uid}/personalData`)\n      .onSnapshot((querySnapshot)=>{\n        const personalData = []\n        querySnapshot.forEach((doc)=>{\n          personalData.push({...doc.data(),key: doc.id})\n        })\n        setRequiredKcal(personalData[0].requiredKcal)\n        setTargetWeight(personalData[0].targetWeight)\n      })\n      \n      \n        // if (weightData == null) { return null; }\n        // if (foodData == null) { return null; }\n       return () => {console.log('Clean Up ')};\n       \n    },[amountDisplay])\n  \n        \n  \n  return (\n    <View style={styles.container}>\n      <View  style={styles.upperContainer}>\n        <View style={styles.upperLeft}>\n          <Text style={styles.upperContainerTitle}>必要摂取カロリーまで</Text>\n          <Text style={styles.upperContainerText}>{`${requiredKcal-currentKcal} kcal`}</Text>\n        </View>\n\n        <View style={styles.upperLeft}>\n          <Text style={styles.upperContainerTitle}>目標体重まで</Text>\n          <Text style={styles.upperContainerText}>{`${Math.round((weightList[weightList.length-1]-targetWeight)*10)/10} kg`}</Text>\n        </View>\n      </View>\n      <LineChart \n        data = {{\n          labels: weightLabels,\n          datasets: [{data:weightList}]\n        }}\n        formatYLabel={decimalPoint}\n        yAxisSuffix=\" kg\"\n        style={styles.lineChart} \n        width={400} height={200} \n        chartConfig={chartConfig}\n        withInnerLines={false}\n        withOuterLines={false}\n      />\n      <LineChart \n        data = {{\n            labels: kcalLabels,\n            datasets: [{data:kcalList}]\n        }}\n        formatYLabel={toInteger}\n        yAxisSuffix=\"kcal\"\n        style={styles.lineChart} \n        width={400} height={200} \n        chartConfig={chartConfig}\n        withInnerLines={false}\n        withOuterLines={false}\n      />\n      <View style={{flexDirection:\"row\",justifyContent:\"space-around\"}}>\n        <TouchableHighlight onPress={prevChart}>\n          <View>\n            <Text>\n              <FontAwesome name={\"arrow-left\"} size={25}/>\n            </Text>\n            <Text>BACK</Text>\n          </View>\n        </TouchableHighlight>\n        <TouchableHighlight onPress={nextChart}>\n          <View style={{flexDirection:\"row\"}}>\n            <Text>NEXT</Text>\n            <Text>\n              <FontAwesome name={\"arrow-right\"} size={20}/>\n            </Text>\n          </View>\n        </TouchableHighlight>\n      </View>\n\n      <TouchableHighlight style={styles.button} underlayColor=\"#C70F66\"\n        onPress={()=>props.navigation.navigate(\"TrainingManagement\")}>\n        <Text style={styles.buttonTitle}>今日のトレーニング\n        </Text>\n      </TouchableHighlight> \n\n      <TouchableHighlight style={styles.button} \n        underlayColor=\"#C70F66\"\n        onPress={()=>props.navigation.navigate(\"FoodManagement\")}>\n        <Text style={styles.buttonTitle}>今日の食事</Text>\n      </TouchableHighlight>\n\n      <TouchableHighlight style={styles.button} underlayColor=\"#C70F66\"\n        onPress={()=>props.navigation.navigate(\"WeightManagement\")}>\n      <Text style={styles.buttonTitle} >今日の体重</Text>\n      </TouchableHighlight>\n      <CircleButton name={\"cog\"} onPress={()=>props.navigation.navigate(\"PersonalData\")}/>\n    </View>\n  ); \n}\n\nexport default HomeScreen"]},"metadata":{},"sourceType":"module"}